<html>
<head>
    <meta charset='utf-8'>
    <link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>
    <style>
        body {
            background: #333;
            color: #eee;
            padding: 5%;
            font-family: 'Crete Round', serif;
        }
        h1 {
            color: #C80;
        }
        .half {
            width: 40%;
            float: left;
        }
        a {
            color: #DFA;
        }
        .view {
            background-color: #EEA;
            width: 20%;
            margin:3%;
            padding:2%;
            color: #333;
            border-radius: 10px;
            float: left;
        }
        .view a {
            color: #033;
        }
        section {
            width: 100%;
            display: inline-block;
        }
    </style>
</head>
<body>
    <h1>
        SeedJs - Backbone Integration
    </h1>
    <h3>
        Each one of the backbone views defined after the yellow containers points to one of them. Use your javascript console to create new classes and test SeedJs!
    </h3>

    <div class="view container">Hello world</div>

    <div class="view containerClio">Hello world</div>

    <div class="view containerYamaha">Hello world</div>
    <section>
        <div class="half">
            <pre>
            var Vehiculo = SeedModel.extend({motor:{cilindros:0, pistones:0},
                ruedas:0,
                puertas:0,
                speed: 0,
                name: 'Vehicle',
                sound: "rrrrrrrr",
                run: function() {
                    this.trigger('run');
                },
                acelerate: function() {
                    this.speed += 10;
                    console.log('new speed:' + this.speed);
                },
                brake: function() {
                    this.speed -= 10;
                }
            });
            var Coche = Vehiculo.extend({ruedas: 4,
                puertas:4,
                sound: "brrum brrrum"
            });
            var Moto = Vehiculo.extend({ruedas: 2});
            var Clio = Coche.extend({
                name: "little car",
                motor:{cilindros:8, pistones:16},
                acelerate: function() {
                    this.parent('acelerate');
                    if(this.speed > 50) {
                        this.speed = 0;
                        alert('CRASH');
                    }
                },
                run: function() {
                    this.acelerate();
                    this.parent('run');
                }

            });
            </pre>
        </div>
        <div class="half">
            <pre>
            var Yamaha = Moto.extend({
                name: "Yamaha",
                motor:{cilindros:4, pistones:10},
                run: function()  {
                    this.acelerate();
                    this.acelerate();
                    this.parent('run');
                }
            });
            var VehiculoView = SeedView.extend({
                model: Vehiculo,
                events: {
                    'click a':'run'
                },
                initialize: function() {
                    this.run = _.bind(this.run,this);
                    this.render = _.bind(this.render, this);
                    this.model.bind('run', this.render);

                },
                render: function() {
                    $(this.el).html("The " + this.model.name + ' goes at ' + this.model.speed);
                    $(this.el).append("&lt;br/&gt;&lt;a href='#'&gt;Run run run!&lt;/a&gt;");
                },
                run: function(e) {
                    e.preventDefault();
                    this.model.run();
                }
            })
            var MotoView = VehiculoView.extend({
                render: function() {
                    this.parent('render');
                    $(this.el).append(" <- click this to brrrrrrrroum");
                }
            })
            </pre>
        </div>
    </section>
    <section>
        <div class="half">
            Get it at <a href="https://github.com/johnHackworth/SeedJs">https://github.com/johnHackworth/SeedJs</a>
        </div>
        <div class="half">
            Check the <a href="example.html">plain inheritance system example</a>
        </div>
    </section>

<script src=" https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>

<script src="/SeedJs/src/pi.js"></script>
<script src="/SeedJs/src/seed.js"></script>
<script src="/SeedJs/src/backboneAdapter.js"></script>


<script>
window.Vehiculo = SeedModel.extend({motor:{cilindros:0, pistones:0},
    ruedas:0,
    puertas:0,
    speed: 0,
    name: 'Vehicle',
    sound: "rrrrrrrr",
    run: function() {
        this.trigger('run');
    },
    acelerate: function() {
        this.speed += 10;
        console.log('new speed:' + this.speed);
    },
    brake: function() {
        this.speed -= 10;
    }
});
window.Coche = Vehiculo.extend({ruedas: 4,
    puertas:4,
    sound: "brrum brrrum"
});
window.Moto = Vehiculo.extend({ruedas: 2});
window.Clio = Coche.extend({
    name: "little car",
    motor:{cilindros:8, pistones:16},
    acelerate: function() {
        this.parent('acelerate');
        if(this.speed > 50) {
            this.speed = 0;
            alert('CRASH');
        }
    },
    run: function() {
        this.acelerate();
        this.parent('run');
    }

});
window.Yamaha = Moto.extend({
    name: "Yamaha",
    motor:{cilindros:4, pistones:10},
    run: function()  {
        this.acelerate();
        this.acelerate();
        this.parent('run');
    }
});

window.VehiculoView = SeedView.extend({
    model: Vehiculo,
    events: {
        'click a':'run'
    },
    initialize: function() {
        this.run = _.bind(this.run,this);
        this.render = _.bind(this.render, this);
        this.model.bind('run', this.render);

    },
    render: function() {
        $(this.el).html("The " + this.model.name + ' goes at ' + this.model.speed);
        $(this.el).append("<br/><a href='#'>Run run run!</a>");
    },
    run: function(e) {
        e.preventDefault();
        this.model.run();
    }
})

window.MotoView = VehiculoView.extend({
    render: function() {
        this.parent('render');
        $(this.el).append(" <- click this to brrrrrrrroum");
    }
})

$(document).ready(function() {

    window.v = new Vehiculo();
    window.vView = new VehiculoView({
        el: $('.container'),
        model: v
    });
    vView.render();
    window.c = new Clio();
    window.cView = new VehiculoView({
        el: $('.containerClio'),
        model: c
    });
    cView.render();
    window.y = new Yamaha();
    window.yView = new MotoView({
        el: $('.containerYamaha '),
        model: y
    });
    yView.render();
})
</script>
</body>

</html>
